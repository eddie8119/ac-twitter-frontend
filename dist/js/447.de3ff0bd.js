(self["webpackChunkforum_front_end_vue"]=self["webpackChunkforum_front_end_vue"]||[]).push([[447],{70447:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>v});s(68309),s(82526),s(41817);var r=function(){var t=this,e=t._self._c;return e("div",t._l(t.tweets,(function(r){return e("div",{key:r.id,attrs:{id:"user-post-list-container"}},[e("img",{staticClass:"user-headshot",attrs:{src:t._f("emptyImage")(r.User.avatar),alt:"個人頭像"}}),e("div",{staticClass:"ml-2"},[e("div",{staticClass:"d-flex align-items-center"},[e("a",{staticClass:"user-name",attrs:{href:"#"}},[t._v(" "+t._s(r.User.name)+" ")]),e("p",{staticClass:"user-acount-for-post ml-2"},[e("span",[t._v("@")]),t._v(" "+t._s(r.User.account)+" "),e("span",[t._v(" • ")])]),e("p",{staticClass:"post-time"},[t._v(" "+t._s(t._f("fromNow")(r.createdAt))+" ")])]),e("p",{staticClass:"tweet-content mt-2"},[t._v(" "+t._s(r.description)+" ")]),e("div",{staticClass:"tweet-icon-show-pannel d-flex mt-1"},[e("a",{staticClass:"d-flex align-items-center",attrs:{href:""}},[e("img",{staticClass:"tweet-icon-show",attrs:{src:s(63461),alt:""}}),e("span",{staticClass:"reply-number ml-1"},[t._v(" "+t._s(r.replyCount)+" ")])]),e("div",{staticClass:"d-flex align-items-center ml-8"},[r.isLiked?e("button",[e("img",{staticClass:"tweet-icon-show",attrs:{src:s(68665),alt:"likedx2.png"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.unLike(r.id)}}})]):e("button",[e("img",{staticClass:"tweet-icon-show",attrs:{src:s(66159),alt:"like.png"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLike(r.id)}}})]),e("span",{staticClass:"like-number ml-1"},[t._v(" "+t._s(r.likeCount)+" ")])])])])])})),0)},n=[],a=s(50124),i=s(48534),o=s(4648),c=(s(21703),s(96647),s(38862),s(26833),s(21249),s(83459)),l=s(78390),u=s(76163);const d={name:"UserPostList",mixins:[c.qk,c.Lf],props:{initialTweets:{type:Array,required:!0}},data:function(){return{tweets:this.initialTweets}},watch:{initialTweets:function(t){this.tweets=(0,o.Z)((0,o.Z)({},this.tweets),t)}},methods:{addLike:function(t){var e=this;return(0,i.Z)((0,a.Z)().mark((function s(){var r,n,i,c;return(0,a.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,console.log("tweetId=",t),s.next=5,l.Z.addLike({tweetId:t});case 5:if(r=s.sent,n=r.data,console.log("data=",n),"error"!==n.status){s.next=10;break}throw new Error(n.message);case 10:i=JSON.parse(JSON.stringify(e.tweets)),c=Object.values(i),e.tweets=c.map((function(e){return e.id===t?(0,o.Z)((0,o.Z)({},e),{},{isLiked:!0,likeCount:e.likeCount+1}):e})),e.isProcessing=!1,s.next=21;break;case 16:s.prev=16,s.t0=s["catch"](0),console.error(s.t0.message),e.isProcessing=!1,u.F.fire({icon:"error",title:"無法對 Tweet 按 Like，請稍後再試"});case 21:case"end":return s.stop()}}),s,null,[[0,16]])})))()},unLike:function(t){var e=this;return(0,i.Z)((0,a.Z)().mark((function s(){var r,n,i,c;return(0,a.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,console.log("tweetId=",t),s.next=5,l.Z.unLike({tweetId:t});case 5:if(r=s.sent,n=r.data,console.log("data=",n),"error"!==n.status){s.next=10;break}throw new Error(n.message);case 10:i=JSON.parse(JSON.stringify(e.tweets)),c=Object.values(i),e.tweets=c.map((function(e){return e.id===t?(0,o.Z)((0,o.Z)({},e),{},{isLiked:!1,likeCount:e.likeCount-1}):e})),e.isProcessing=!1,s.next=21;break;case 16:s.prev=16,s.t0=s["catch"](0),console.error(s.t0.message),e.isProcessing=!1,u.F.fire({icon:"error",title:"無法對 Tweet 取消 Like，請稍後再試"});case 21:case"end":return s.stop()}}),s,null,[[0,16]])})))()}}},p=d;var f=s(43736),w=(0,f.Z)(p,r,n,!1,null,null,null);const v=w.exports},44699:(t,e,s)=>{var r=s(19781),n=s(1702),a=s(81956),i=s(45656),o=s(55296).f,c=n(o),l=n([].push),u=function(t){return function(e){var s,n=i(e),o=a(n),u=o.length,d=0,p=[];while(u>d)s=o[d++],r&&!c(n,s)||l(p,t?[s,n[s]]:n[s]);return p}};t.exports={entries:u(!0),values:u(!1)}},26833:(t,e,s)=>{var r=s(82109),n=s(44699).values;r({target:"Object",stat:!0},{values:function(t){return n(t)}})}}]);
//# sourceMappingURL=447.de3ff0bd.js.map