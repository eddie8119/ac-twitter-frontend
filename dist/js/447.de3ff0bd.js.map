{"version":3,"file":"js/447.de3ff0bd.js","mappings":"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","sources":["webpack://forum-front-end-vue/./src/components/UserPostList.vue","webpack://forum-front-end-vue/src/components/UserPostList.vue","webpack://forum-front-end-vue/./src/components/UserPostList.vue?a2dd","webpack://forum-front-end-vue/./src/components/UserPostList.vue?f12e","webpack://forum-front-end-vue/./node_modules/core-js/internals/object-to-array.js","webpack://forum-front-end-vue/./node_modules/core-js/modules/es.object.values.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',_vm._l((_vm.tweets),function(tweet){return _c('div',{key:tweet.id,attrs:{\"id\":\"user-post-list-container\"}},[_c('img',{staticClass:\"user-headshot\",attrs:{\"src\":_vm._f(\"emptyImage\")(tweet.User.avatar),\"alt\":\"個人頭像\"}}),_c('div',{staticClass:\"ml-2\"},[_c('div',{staticClass:\"d-flex align-items-center\"},[_c('a',{staticClass:\"user-name\",attrs:{\"href\":\"#\"}},[_vm._v(\" \"+_vm._s(tweet.User.name)+\" \")]),_c('p',{staticClass:\"user-acount-for-post ml-2\"},[_c('span',[_vm._v(\"@\")]),_vm._v(\" \"+_vm._s(tweet.User.account)+\" \"),_c('span',[_vm._v(\" • \")])]),_c('p',{staticClass:\"post-time\"},[_vm._v(\" \"+_vm._s(_vm._f(\"fromNow\")(tweet.createdAt))+\" \")])]),_c('p',{staticClass:\"tweet-content mt-2\"},[_vm._v(\" \"+_vm._s(tweet.description)+\" \")]),_c('div',{staticClass:\"tweet-icon-show-pannel d-flex mt-1\"},[_c('a',{staticClass:\"d-flex align-items-center\",attrs:{\"href\":\"\"}},[_c('img',{staticClass:\"tweet-icon-show\",attrs:{\"src\":require(\"../assets/reply.png\"),\"alt\":\"\"}}),_c('span',{staticClass:\"reply-number ml-1\"},[_vm._v(\" \"+_vm._s(tweet.replyCount)+\" \")])]),_c('div',{staticClass:\"d-flex align-items-center ml-8\"},[(tweet.isLiked)?_c('button',[_c('img',{staticClass:\"tweet-icon-show\",attrs:{\"src\":require(\"../assets/likedx2.png\"),\"alt\":\"likedx2.png\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.unLike(tweet.id)}}})]):_c('button',[_c('img',{staticClass:\"tweet-icon-show\",attrs:{\"src\":require(\"../assets/like.png\"),\"alt\":\"like.png\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addLike(tweet.id)}}})]),_c('span',{staticClass:\"like-number ml-1\"},[_vm._v(\" \"+_vm._s(tweet.likeCount)+\" \")])])])])])}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div\r\n      v-for=\"tweet in tweets\"\r\n      id=\"user-post-list-container\"\r\n      :key=\"tweet.id\"\r\n    >\r\n      <img\r\n        class=\"user-headshot\"\r\n        :src=\"tweet.User.avatar | emptyImage\"\r\n        alt=\"個人頭像\"\r\n      >\r\n      <div class=\"ml-2\">\r\n        <div class=\"d-flex align-items-center\">\r\n          <a\r\n            href=\"#\"\r\n            class=\"user-name\"\r\n          >\r\n            {{ tweet.User.name }}\r\n          </a>\r\n          <p class=\"user-acount-for-post ml-2\">\r\n            <span>@</span>\r\n            {{ tweet.User.account }}\r\n            <span> • </span>\r\n          </p>\r\n          <p class=\"post-time\">\r\n            {{ tweet.createdAt | fromNow }}\r\n          </p>\r\n        </div>\r\n        <p class=\"tweet-content mt-2\">\r\n          {{ tweet.description }}\r\n        </p>\r\n        <div class=\"tweet-icon-show-pannel d-flex mt-1\">\r\n          <a\r\n            href=\"\"\r\n            class=\"d-flex align-items-center\"\r\n          >\r\n            <img\r\n              src=\"../assets/reply.png\"\r\n              alt=\"\"\r\n              class=\"tweet-icon-show\"\r\n            >\r\n            <span class=\"reply-number ml-1\">\r\n              {{ tweet.replyCount }}\r\n            </span>\r\n          </a>\r\n\r\n          <div class=\"d-flex align-items-center ml-8\">\r\n            <button\r\n              v-if=\"tweet.isLiked\"\r\n            >\r\n              <img\r\n                src=\"../assets/likedx2.png\"\r\n                alt=\"likedx2.png\"\r\n                class=\"tweet-icon-show\"\r\n                @click.stop.prevent=\"unLike(tweet.id)\"\r\n              >\r\n            </button>\r\n            <button\r\n              v-else\r\n            >\r\n              <img\r\n                src=\"../assets/like.png\"\r\n                alt=\"like.png\"\r\n                class=\"tweet-icon-show\"\r\n                @click.stop.prevent=\"addLike(tweet.id)\"\r\n              >\r\n            </button>\r\n            <span class=\"like-number ml-1\">\r\n              {{ tweet.likeCount }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { fromNowFilter } from './../utils/mixins'\r\nimport { emptyImageFilter } from './../utils/mixins'\r\nimport usersAPI from './../apis/users'\r\nimport { Toast } from './../utils/helpers'\r\n\r\nexport default {\r\n  name: \"UserPostList\",\r\n  mixins: [fromNowFilter,emptyImageFilter],\r\n  props: {\r\n    initialTweets: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      tweets: this.initialTweets\r\n    }\r\n  },\r\n  watch: {\r\n    initialTweets (newValue) {\r\n      this.tweets = {\r\n        ...this.tweets,\r\n        ...newValue\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async addLike (tweetId) {\r\n      try {\r\n        this.isProcessing = true\r\n        console.log('tweetId=',tweetId)\r\n        const { data } = await usersAPI.addLike({ tweetId })\r\n        console.log('data=',data)\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n        const obj = JSON.parse(JSON.stringify(this.tweets))\r\n        const arr = Object.values(obj)\r\n        this.tweets = arr.map(t=>{\r\n          if(t.id === tweetId) {\r\n            return {\r\n              ...t,\r\n              isLiked: true,\r\n              likeCount: t.likeCount+1\r\n            }\r\n          } else {\r\n            return t\r\n          }\r\n        })\r\n\r\n        this.isProcessing = false\r\n      } catch (error) {\r\n        console.error(error.message)\r\n        this.isProcessing = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法對 Tweet 按 Like，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async unLike (tweetId) {\r\n      try {\r\n        this.isProcessing = true\r\n        console.log('tweetId=',tweetId)\r\n        const { data } = await usersAPI.unLike({ tweetId })\r\n        console.log('data=',data)\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n        const obj = JSON.parse(JSON.stringify(this.tweets))\r\n        const arr = Object.values(obj)\r\n        this.tweets = arr.map(t=>{\r\n          if(t.id === tweetId) {\r\n            return {\r\n              ...t,\r\n              isLiked: false,\r\n              likeCount: t.likeCount-1\r\n            }\r\n          } else {\r\n            return t\r\n          }\r\n        })\r\n\r\n        this.isProcessing = false\r\n      } catch (error) {\r\n        console.error(error.message)\r\n        this.isProcessing = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法對 Tweet 取消 Like，請稍後再試'\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserPostList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserPostList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserPostList.vue?vue&type=template&id=6353e0d4&\"\nimport script from \"./UserPostList.vue?vue&type=script&lang=js&\"\nexport * from \"./UserPostList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\nvar propertyIsEnumerable = uncurryThis($propertyIsEnumerable);\nvar push = uncurryThis([].push);\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable(O, key)) {\n        push(result, TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.es/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.es/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.es/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n"],"names":["render","_vm","this","_c","_self","_l","tweets","tweet","key","id","attrs","staticClass","_f","User","avatar","_v","_s","name","account","createdAt","description","require","replyCount","isLiked","on","$event","stopPropagation","preventDefault","unLike","addLike","likeCount","staticRenderFns","mixins","props","initialTweets","type","required","data","watch","newValue","methods","tweetId","console","usersAPI","obj","JSON","arr","Object","t","Toast","icon","title","component","DESCRIPTORS","uncurryThis","objectKeys","toIndexedObject","$propertyIsEnumerable","propertyIsEnumerable","push","createMethod","TO_ENTRIES","it","O","keys","length","i","result","module","exports","entries","values","$","$values","target","stat"],"sourceRoot":""}