"use strict";(self["webpackChunkforum_front_end_vue"]=self["webpackChunkforum_front_end_vue"]||[]).push([[342],{26012:(e,s,r)=>{r.d(s,{Z:()=>m});r(68309);var t=function(){var e=this,s=e._self._c;return s("div",{attrs:{id:"navpillHeader-container"}},[e._m(0),s("div",{staticClass:"navpill-info-container flex-column"},[s("router-link",{staticClass:"navpillHeader-title",attrs:{to:"/user"}},[e._v(" "+e._s(e.currentUser.name)+" ")]),s("p",{staticClass:"post-number-hint"},[e._v(" "+e._s(e.currentUser.tweetsCount)+" "),s("span",[e._v("推文")])])],1)])},a=[function(){var e=this,s=e._self._c;return s("a",{attrs:{href:"javascript:history.back()"}},[s("img",{staticClass:"arrow-icon",attrs:{src:r(57139),alt:"回到上一頁"}})])}],n=r(4648),i=r(63822);const o={name:"NavpillHeader",data:function(){return{isLoading:!0}},computed:(0,n.Z)({},(0,i.rn)(["currentUser"]))},u=o;var l=r(43736),c=(0,l.Z)(u,t,a,!1,null,null,null);const m=c.exports},39342:(e,s,r)=>{r.r(s),r.d(s,{default:()=>x});var t=function(){var e=this,s=e._self._c;return s("div",{staticClass:"d-flex justify-content-center"},[s("NavBar"),s("div",{staticClass:"main-wrapper"},[s("NavpillHeader"),s("SettingForm")],1)],1)},a=[],n=r(38359),i=r(26012),o=(r(68309),function(){var e=this,s=e._self._c;return s("div",{staticClass:"flex-column",attrs:{id:"setting-form-container"}},[s("form",{staticClass:"form-container",on:{submit:function(s){return s.preventDefault(),s.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form-element-group"},[s("label",{attrs:{for:"user-account"}},[e._v("帳號")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.account,expression:"user.account"}],staticClass:"user-account",attrs:{id:"user-account",type:"text",placeholder:"請輸入帳號",required:""},domProps:{value:e.user.account},on:{input:function(s){s.target.composing||e.$set(e.user,"account",s.target.value)}}})]),s("div",{staticClass:"form-element-group"},[s("label",{attrs:{for:"user-name"}},[e._v("名稱")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"user-name",attrs:{id:"user-name",type:"text",placeholder:"請輸入使用者名稱",required:""},domProps:{value:e.user.name},on:{input:function(s){s.target.composing||e.$set(e.user,"name",s.target.value)}}})]),s("div",{staticClass:"form-element-group"},[s("label",{attrs:{for:"user-name"}},[e._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"user-email",attrs:{id:"user-email",type:"email",placeholder:"請輸入Email",required:""},domProps:{value:e.user.email},on:{input:function(s){s.target.composing||e.$set(e.user,"email",s.target.value)}}})]),s("div",{staticClass:"form-element-group"},[s("label",{attrs:{for:"user-password"}},[e._v("密碼")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"user-password",attrs:{id:"user-password",type:"password",placeholder:"請輸入密碼",required:""},domProps:{value:e.user.password},on:{input:function(s){s.target.composing||e.$set(e.user,"password",s.target.value)}}})]),s("div",{staticClass:"form-element-group"},[s("label",{attrs:{for:"user-password-confirm"}},[e._v("密碼再確認")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.checkPassword,expression:"user.checkPassword"}],staticClass:"user-password-confirm",attrs:{id:"user-password-confirm",type:"password",placeholder:"請再次輸入密碼",required:""},domProps:{value:e.user.checkPassword},on:{input:function(s){s.target.composing||e.$set(e.user,"checkPassword",s.target.value)}}})]),s("div",{staticClass:"d-flex justify-content-end"},[s("button",{staticClass:"login-btn main-btn-style",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" 儲存 ")])])])])}),u=[],l=r(50124),c=r(48534),m=r(4648),d=(r(21703),r(96647),r(78390)),p=r(76163),v=r(24239);const f={name:"SettingForm",data:function(){return{user:(0,m.Z)({},v.Z.state.currentUser),isProcessing:!1}},methods:{handleSubmit:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function s(){var r,t;return(0,l.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,e.user.account&&e.user.name&&e.user.email&&e.user.password&&e.user.checkPassword){s.next=4;break}return p.F.fire({icon:"warning",title:"請確認已填寫所有欄位"}),s.abrupt("return");case 4:if(e.user.password===e.user.checkPassword){s.next=8;break}return p.F.fire({icon:"warning",title:"兩次輸入的密碼不同"}),e.user.checkPassword="",s.abrupt("return");case 8:return e.isProcessing=!0,s.next=11,d.Z.putUser(e.user);case 11:if(r=s.sent,t=r.data,!t.status){s.next=15;break}throw new Error(t.message);case 15:e.$store.commit("setCurrentUser",t),p.F.fire({icon:"success",title:"使用者-".concat(e.user.account,"-設定儲存成功")}),e.isProcessing=!1,s.next=24;break;case 20:s.prev=20,s.t0=s["catch"](0),e.isProcessing=!1,p.F.fire({icon:"warning",title:"設定儲存失敗 - ".concat(s.t0.message)});case 24:case"end":return s.stop()}}),s,null,[[0,20]])})))()}}},g=f;var A=r(43736),w=(0,A.Z)(g,o,u,!1,null,null,null);const h=w.exports,C={name:"SettingPage",components:{NavBar:n.Z,NavpillHeader:i.Z,SettingForm:h}},_=C;var b=(0,A.Z)(_,t,a,!1,null,null,null);const x=b.exports},57139:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAOCAYAAADJ7fe0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABTSURBVHgBrdLRCQAgCATQo0ncfylHKRTqQwrM88Cojx6UYl6iqlNEvDLBCwBQQyJg5y+kChyEARxhAUc2UC27P9CRlufYQn/s3tAtZqH+sY9QFlmZh9qG/+G4HQAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=342.e39ece87.js.map